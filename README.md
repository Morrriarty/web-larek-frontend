•https://github.com/Morrriarty/web-larek-frontend - ссылка на репозиторий.

# Онлайн-магазин на TypeScript с использованием MVC

## 1.Описание проекта
 Это проект онлайн-магазина, реализованный на TypeScript с использованием архитектурного паттерна MVC (Model-View-Controller). Приложение позволяет пользователям просматривать список товаров, добавлять их в корзину, оформлять заказы и взаимодействовать с интерфейсом, основанным на событиях.

## 2.Используемый стек технологий
•Язык программирования: TypeScript
•Сборка проекта: Webpack
•Модульная система: ES6 Modules
•Стили: SCSS (SASS)
•Взаимодействие с API: Fetch API
•Паттерны проектирования: MVC (Model-View-Controller), Observer Pattern

## 3.Инструкция по сборке и запуску
•Для установки и запуска проекта необходимо выполнить команды
    npm install
    npm run start
    или
    yarn
    yarn start

•Сборка
    npm run build
    или
    yarn build

## 4.Описание архитектуры проекта
 Проект построен с использованием архитектурного паттерна MVC (Model-View-Controller), который разделяет приложение на три взаимосвязанные компоненты:

•Model (Модель): Управляет данными и бизнес-логикой.
•View (Представление): Отвечает за отображение данных пользователю.
•Controller (Контроллер): Обрабатывает ввод пользователя и взаимодействует с Моделью и Представлением.

### Основные компоненты

#### Модели
•ProductModel (src/models/ProductModel.ts)
 •Назначение: Загружает и хранит данные о продуктах из API.

 •Функции:
    fetchProducts(): Загружает список продуктов с сервера.
    getProductById(id: string): Возвращает продукт по его ID.
    getProducts(): Возвращает список всех загруженных продуктов.

•CartModel (src/models/CartModel.ts)
 •Назначение: Управляет корзиной покупок и деталями заказа.

 •Функции:
    addItem(item: Product): Добавляет продукт в корзину.
    removeItem(id: string): Удаляет продукт из корзины по ID.
    getItems(): Возвращает все товары в корзине.
    getTotal(): Рассчитывает общую стоимость товаров в корзине.
    clearCart(): Очищает корзину и сбрасывает детали заказа.
    setOrderDetails(details: OrderDetails): Устанавливает детали заказа (способ оплаты и адрес).
    getOrderDetails(): Возвращает детали заказа.

#### Представления
•ProductListView (src/views/ProductListView.ts)

 •Назначение: Отображает список продуктов на главной странице.
 •Функции:
    render(products: Product[]): Рендерит карточки продуктов.
    createProductCard(product: Product): Создает DOM-элемент карточки продукта.
    
•ProductDetailView (src/views/ProductDetailView.ts)
 •Назначение: Отображает детальную информацию о выбранном продукте.
 •Функции:
    render(product: Product): Рендерит детали продукта.

•CartView (src/views/CartView.ts)
 •Назначение: Отображает содержимое корзины.
 •Функции:
    render(items: Product[], total: number): Рендерит товары в корзине и общую стоимость.

•FormView (src/views/FormView.ts)
 •Назначение: Управляет формами оформления заказа и контактных данных.
 •Функции:
    getOrderForm(): Возвращает и настраивает форму заказа.
    getContactsForm(): Возвращает и настраивает форму контактных данных.
    getSuccessMessage(total: number): Отображает сообщение об успешном заказе.
    validateOrderForm(): Валидирует форму заказа.
    validateContactsForm(): Валидирует форму контактных данных.
    setFormTransparency(isTransparent: boolean): Управляет прозрачностью формы при вводе текста.

•Modal (src/views/Modal.ts)
 •Назначение: Управляет отображением модальных окон.
 •Функции:
    open(): Открывает модальное окно.
    close(): Закрывает модальное окно.
    setContent(content: HTMLElement, contentType?: string): Устанавливает содержимое модального окна.
    isOpen(): Проверяет, открыто ли модальное окно.
    getContentType(): Возвращает тип текущего содержимого модального окна.

#### Контроллер
•Главный контроллер приложения (src/index.ts)
 •Назначение: Связывает модели и представления, обрабатывает пользовательские действия.
 •Функции:
    Инициализирует модели, представления и EventEmitter.
    Устанавливает обработчики событий.
    Управляет потоком данных и пользовательскими взаимодействиями.

#### Утилиты
•EventEmitter (src/utils/EventEmitter.ts)
 •Назначение: Обеспечивает обмен событиями между компонентами.
 •Функции:
    on(event: string, listener: Function): Подписывается на событие.
    off(event: string, listener: Function): Отписывается от события.
    emit(event: string, ...args: any[]): Инициирует событие и вызывает соответствующие обработчики.

•APIClientImpl (src/api/APIClient.ts)
 •Назначение: Взаимодействует с API сервера.
 •Функции:
    getProducts(): Получает список продуктов.
    getProduct(id: string): Получает данные конкретного продукта.
    createOrder(order: Order): Отправляет заказ на сервер.

#### Взаимодействие компонентов
•Событийная модель: Компоненты взаимодействуют через EventEmitter, что обеспечивает слабое связывание и гибкость.

•Поток данных:
Модели предоставляют данные Представлениям.
Представления отображают данные и инициируют события при взаимодействии пользователя.
Контроллер обрабатывает события и вызывает методы моделей и представлений.

#### Типы данных и их функции
•Product (src/types/index.ts)
 •Описание: Представляет товар в магазине.
 •Поля:
    id: string
    title: string
    description: string
    image: string
    category: string
    price: number | null

•ProductList
 •Описание: Содержит список товаров и общее количество.
 •Поля:
    total: number
    items: Product[]

•Order
 •Описание: Представляет заказ пользователя.
 •Поля:
    payment: PaymentMethod (тип оплаты: 'online' или 'cash')
    email: string
    phone: string
    address: string
    total: number
    items: string[] (массив ID товаров)

•OrderResponse
 •Описание: Ответ сервера после создания заказа.
 •Поля:
    id: string
    total: number

•APIError
 •Описание: Ошибка, возвращаемая API.
 •Поля:
    error: string

#### Процессы в приложении
•Загрузка и отображение продуктов:
 •ProductModel загружает продукты из API.
 •При событии productsLoaded ProductListView отображает список продуктов.

•Выбор продукта и добавление в корзину:
 •При клике на продукт ProductDetailView отображает детали продукта в модальном окне.
 •При нажатии на кнопку «Купить» товар добавляется в корзину через CartModel.

•Управление корзиной:
 •CartView отображает текущие товары в корзине.
 •Пользователь может удалять товары из корзины.
 •Общая стоимость обновляется автоматически.

•Оформление заказа:
 •Пользователь заполняет формы заказа и контактных данных через FormView.
 •При валидном вводе данные заказа отправляются на сервер с помощью APIClientImpl.
 •После успешного заказа отображается сообщение об успехе.

## 5.Автор
•Github - Morrriarty